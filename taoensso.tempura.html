<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>taoensso.tempura documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Tempura</span> <span class="project-version">1.1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>taoensso</span></div></div></li><li class="depth-2 current"><a href="taoensso.tempura.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tempura</span></div></a></li><li class="depth-3"><a href="taoensso.tempura.impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="taoensso.tempura.html#var-*tr-opts*"><div class="inner"><span>*tr-opts*</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-*tr-scope*"><div class="inner"><span>*tr-scope*</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-default-tr-opts"><div class="inner"><span>default-tr-opts</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-example-dictionary"><div class="inner"><span>example-dictionary</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-load-resource-at-compile-time"><div class="inner"><span>load-resource-at-compile-time</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-load-resource-at-runtime"><div class="inner"><span>load-resource-at-runtime</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-parse-http-accept-header"><div class="inner"><span>parse-http-accept-header</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-tr"><div class="inner"><span>tr</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-with-tr-opts"><div class="inner"><span>with-tr-opts</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-with-tr-scope"><div class="inner"><span>with-tr-scope</span></div></a></li><li class="depth-1"><a href="taoensso.tempura.html#var-wrap-ring-request"><div class="inner"><span>wrap-ring-request</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">taoensso.tempura</h1><div class="doc"><pre class="plaintext">Pure Clojure/Script i18n translations library.
</pre></div><div class="public anchor" id="var-*tr-opts*"><h3>*tr-opts*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-*tr-scope*"><h3>*tr-scope*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-default-tr-opts"><h3>default-tr-opts</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-example-dictionary"><h3>example-dictionary</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-load-resource-at-compile-time"><h3>load-resource-at-compile-time</h3><h4 class="type">macro</h4><div class="usage"><code>(load-resource-at-compile-time rname)</code></div><div class="doc"><pre class="plaintext">Experimental, subject to change.
Reads and inlines an edn resource on classpath, at compile-time.
Supported by: both clj and cljs.

See also `load-resource-at-runtime`.</pre></div></div><div class="public anchor" id="var-load-resource-at-runtime"><h3>load-resource-at-runtime</h3><div class="usage"><code>(load-resource-at-runtime rname)</code></div><div class="doc"><pre class="plaintext">Experimental, subject to change.
Reads and returns an edn resource on classpath, at runtime.
Supported by: clj only (cljs support not possible).

A {:my-key {:__load-resource "my-file.edn"}} dictionary entry is
equivalent to {:my-key (load-resource-at-runtime "my-file.edn")}.

See also `load-resource-at-compile-time`.</pre></div></div><div class="public anchor" id="var-parse-http-accept-header"><h3>parse-http-accept-header</h3><div class="usage"><code>(parse-http-accept-header header)</code></div><div class="doc"><pre class="plaintext">Parses given HTTP Accept header string and returns ordered vector
of choices. No auto normalization. Ref. <a href="https://goo.gl/c4ClkR">https://goo.gl/c4ClkR</a>.</pre></div></div><div class="public anchor" id="var-tr"><h3>tr</h3><div class="usage"><code>(tr opts locales resource-ids)</code><code>(tr opts locales resource-ids resource-args)</code></div><div class="doc"><pre class="plaintext">Next gen Taoensso (tr)anslation API:

(tr
  ;; Opts map to control behaviour:
  {:default-locale :en
   :dict ; Resource dictionary
   {:en {:missing "Missing translation"
         :example {:greet "Hello %1"
                   :farewell "Goodbye %1, it was nice to meet you!"}}}}

  ;; Descending-preference locales to try:
  [:fr-FR :en-GB-variation1]

  ;; Descending-preference dictionary resorces to try. May contain a
  ;; final non-keyword fallback:
  [:example/how-are-you? "How are you, %1?"]

  ;; Optional arbitrary args for insertion into compiled resource:
  ["Steve"])

=&gt; "How are you, Steve?"


Common opts (see `tempura/default-tr-opts` for default vals):

  :default-locale      ; Optional fallback locale to try when given
                       ; locales don't have the requested resource/s.

  :dict                ; Dictionary map of resources,
                       ; {&lt;locale&gt; {&lt;k1&gt; ... {&lt;kn&gt; &lt;resource&gt;}}}.
                       ; See also `tempura/example-dictionary`.

  :resource-compiler   ; (fn [resource]) -&gt; [(fn [vargs]) -&gt; &lt;compiled-resource&gt;].
                       ; Useful if you want to customize any part of how
                       ; dictionary resources are compiled.

  :missing-resource-fn ; (fn [{:keys [opts locales resource-ids resource-args]}]).
                       ; Called when requested resource/s cannot be
                       ; found. Useful for logging, etc. May return a
                       ; non-nil fallback resource value.

  :cache-dict?         ; Only reason you'd want this off is if
                       ; you're using :__load-resource imports and
                       ; and want dictionary to pick up changes.

  :cache-locales?      ; Client will usu. be dealing with a small
                       ; number of locales, the server often a
                       ; large number in the general case. `tr`
                       ; partials may want to enable cached locale
                       ; expansion (e.g. in the context of a
                       ; particular user's Ring request, etc.).

  :cache-resources?    ; For the very highest possible performance
                       ; when using a limited domain of locales +
                       ; resource ids.</pre></div></div><div class="public anchor" id="var-with-tr-opts"><h3>with-tr-opts</h3><h4 class="type">macro</h4><div class="usage"><code>(with-tr-opts opts &amp; body)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-with-tr-scope"><h3>with-tr-scope</h3><h4 class="type">macro</h4><div class="usage"><code>(with-tr-scope scope &amp; body)</code></div><div class="doc"><pre class="plaintext">`(with-tr-scope :foo.bar (tr _ _ [:baz]))` is equivalent to
`(tr _ _ [:foo.bar/baz])`</pre></div></div><div class="public anchor" id="var-wrap-ring-request"><h3>wrap-ring-request</h3><div class="usage"><code>(wrap-ring-request handler {:keys [tr-opts]})</code></div><div class="doc"><pre class="plaintext">Alpha, subject to change.
Wraps Ring handler to add the following keys to requests:

  :tempura/accept-langs ; e.g. ["en-ES" "en-US"], parsed from
                        ; request's Accept-Language HTTP header.

  :tempura/tr ; (partial tr tr-opts (:tr-locales ring-req accept-langs)),
              ; (fn ([resource-ids]) ([resource-ids args]))</pre></div></div></div></body></html>